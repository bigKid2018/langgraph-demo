---
config:
  flowchart:
    curve: linear
  theme: base
  themeVariables:
    primaryColor: '#f4f4f4'
    primaryTextColor: '#333'
    primaryBorderColor: '#333'
    lineColor: '#333'
---

graph TD
    %% å¼€å§‹èŠ‚ç‚¹
    __start__([å¼€å§‹]):::startStyle
    
    %% ä¸»è¦èŠ‚ç‚¹
    agent["AgentèŠ‚ç‚¹<br/>ğŸ“‹ åˆ†æç”¨æˆ·è¾“å…¥<br/>ğŸ¤– è°ƒç”¨LLM"]:::agentStyle
    action["ToolèŠ‚ç‚¹<br/>ğŸ” æ‰§è¡Œå·¥å…·è°ƒç”¨<br/>ğŸ“Š å¤„ç†å·¥å…·ç»“æœ"]:::toolStyle
    
    %% ç»“æŸèŠ‚ç‚¹
    __end__([ç»“æŸ]):::endStyle
    
    %% æ¡ä»¶åˆ¤æ–­
    decision{"ğŸ¤” éœ€è¦è°ƒç”¨å·¥å…·ï¼Ÿ<br/>æ£€æŸ¥tool_calls"}:::decisionStyle
    
    %% å¤–éƒ¨æœåŠ¡
    llm["ğŸ§  Azure OpenAI<br/>GPT-4o"]:::serviceStyle
    tavily["ğŸ” Tavily Search<br/>ç½‘ç»œæœç´¢API"]:::serviceStyle
    
    %% æµç¨‹è¿æ¥
    __start__ --> agent
    agent --> llm
    llm --> agent
    agent --> decision
    decision -->|"æ˜¯<br/>has tool_calls"| action
    decision -->|"å¦<br/>no tool_calls"| __end__
    action --> tavily
    tavily --> action
    action --> agent
    
    %% æ ·å¼å®šä¹‰
    classDef startStyle fill:#e1f5fe,stroke:#0277bd,stroke-width:2px,color:#000
    classDef endStyle fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px,color:#000
    classDef agentStyle fill:#fff3e0,stroke:#ef6c00,stroke-width:2px,color:#000
    classDef toolStyle fill:#e8f5e8,stroke:#2e7d32,stroke-width:2px,color:#000
    classDef decisionStyle fill:#f0f4c3,stroke:#827717,stroke-width:2px,color:#000
    classDef serviceStyle fill:#fce4ec,stroke:#c2185b,stroke-width:2px,color:#000
    
    %% èŠ‚ç‚¹æ³¨é‡Š
    agent -.-> |"ç”Ÿæˆå›ç­”æˆ–<br/>tool_calls"| decision
    action -.-> |"è¿”å›å·¥å…·<br/>æ‰§è¡Œç»“æœ"| agent 